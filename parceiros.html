<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Reservas</title>
        <link rel="stylesheet" href="css/parceiros.css">
        <script src="js/jquery-3.2.1.min.js" onload="window.$ = window.jQuery = module.exports;"></script>
        <script src="js/sorttable.js" charset="utf-8"></script>
        <script src="js/jquery-mask/jquery.mask.min.js" charset="utf-8"></script>
        <script type="text/javascript">
            var mysql = require('mysql');
            var con;
            const electron = require('electron');
            const remote = electron.remote;
            let win;

            function criarConexaoDB() {
                con = mysql.createConnection({
                    host     : 'localhost',
                    user     : 'root',
                    password : 'bcd127',
                    database : 'dbtourdreams'
                });
                con.connect(function(err) {
                    if(err){
                        console.log(err.code);
                        console.log(err.fatal);
                    }
                });
            }

            function selectDB() {
                criarConexaoDB();
                $query = 'SELECT idParceiro, nomeParceiro, cnpj, emailParceiro FROM tbl_parceiro';
                con.query($query, function(err, rows, fields) {
                    if(err){
                        console.log("Houve um erro no SELECT");
                        console.log(err);
                        return;
                    }

                    //Criação de uma linha para a tabela HTML com os dados
                    //provenientes do banco de dados e preenchimento de selects
                    //para edição e exclusão de registros
                    var html = '';
                    for (var i = 0; i < rows.length; i++) {
                        html += '<tr>';
                        html += '<td>';
                        html += rows[i].idParceiro;
                        html += '</td>';
                        html += '<td>';
                        html += rows[i].nomeParceiro;
                        html += '</td>';
                        html += '<td>';
                        html += rows[i].cnpj;
                        html += '</td>';
                        html += '<td>';
                        html += rows[i].emailParceiro;
                        html += '</td>';
                        html += '</tr>';
                    }
                    console.log(html)
                    $("#tblParceiro tr").after(html);
                });
                con.end(function(){});
            }

            selectDB();
            $(document).ready(function () {
                $("#txtCnpj").mask('00.000.000/0000-00');
            })
        </script>
    </head>
    <body>
        <div id="principal">
			<nav>
				<a href="bemvindo.html"><div id="navLogo">
					<img src="imagens/hotel.jpg" alt="Logo">
				</div></a>
				<ul>
					<li>
						<a href="reservas.html">RESERVAS</a>
					</li>
					<li>
						<a href="financeiro.html">FINANCEIRO</a>
					</li>
					<li>
						<a href="parceiros.html">PARCEIROS</a>
					</li>
				</ul>
			</nav>
			<div id="toolbar">
				<div id="botoesBox">
					<div class="botao" onclick="window.close()">
					X
					</div>
				</div>
			</div>
			<div id="conteudo">
                <div id="tableBox">
                    <table class="sortable"  id="tblParceiro">
                        <tr>
                            <th class="th10"># Parceiro</th>
                            <th class="th30">Parceiro</th>
                            <th class="th30">CNPJ</th>
                            <th class="th30">Email</th>
                        </tr>

                    </table>
                </div>
                <div id="detalhesBox">
                    <div id="detalhesEsquerdo">
                        <table>
                            <tr>
                                <td colspan="2"><label for="txtNome">Nome</label></td>
                            </tr>
                            <tr>
                                <td colspan="2">
                                    <input type="text" name="txtNome" id="txtNome">
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2"><label for="txtCNPJ">CNPJ</label></td>
                            </tr>
                            <tr>
                                <td colspan="2">
                                    <input type="text" name="txtCnpj" id="txtCnpj" maxlength="18">
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2"><label for="txtEmail">Email</label></td>
                            </tr>
                            <tr>
                                <td colspan="2">
                                    <input type="email" name="txtEmail" id="txtEmail">
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2">
                                    <label for="txtLogin">Login</label>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2"><input type="text" name="txtLogin" id="txtLogin"></td>
                            </tr>
                            <tr>
                                <td colspan="2"><label for="txtSenha">Senha</label></td>
                            </tr>
                            <tr>
                                <td colspan="2"><input type="password" name="txtSenha" id="txtSenha"></td>
                            </tr>
                    </table>
                    </div>
                    <div id="detalhesDireito">
                        <table>
                            <tr>
                                <td><img src="Imagens/padrao.png" alt="parceiro"></td>
                            </tr>
                            <tr>
                                <td><input type="file" name="filImagem" id="filImagem"></td>
                            </tr>
                            <tr>
                                <td><button type="button" name="btnRegistrar">REGISTRAR</button></td>
                            </tr>
                    </table>
                    </div>
                </div>
			</div>
		</div>
    </body>
</html>
